#############################
# Generated by Ansible - supabase_stack role
#############################

# N8N (now sourced from vault-managed secrets)
N8N_ENCRYPTION_KEY={{ n8n_encryption_key }}
N8N_USER_MANAGEMENT_JWT_SECRET={{ n8n_jwt_secret }}

# Supabase core secrets
POSTGRES_PASSWORD={{ supabase_postgres_password }}
JWT_SECRET={{ supabase_jwt_secret }}
ANON_KEY={{ supabase_anon_key }}
SERVICE_ROLE_KEY={{ supabase_service_role_key }}
DASHBOARD_USERNAME={{ supabase_dashboard_username }}
DASHBOARD_PASSWORD={{ supabase_dashboard_password }}
POOLER_TENANT_ID={{ supabase_pooler_tenant_id }}

# Neo4j
NEO4J_AUTH=neo4j/{{ neo4j_auth_password }}

# Langfuse & related
CLICKHOUSE_PASSWORD={{ clickhouse_password }}
MINIO_ROOT_PASSWORD={{ minio_root_password }}
LANGFUSE_SALT={{ langfuse_salt }}
NEXTAUTH_SECRET={{ nextauth_secret }}
ENCRYPTION_KEY={{ encryption_key }}

# Hostnames for (future) proxy
N8N_HOSTNAME={{ n8n_domain }}
SUPABASE_HOSTNAME={{ supabase_domain }}
FLOWISE_HOSTNAME={{ flowise_domain }}
WEBUI_HOSTNAME={{ openwebui_domain }}
SEARXNG_HOSTNAME={{ searxng_domain }}
NEO4J_HOSTNAME={{ neo4j_domain }}
LANGFUSE_HOSTNAME={{ langfuse_domain }}

# Minimal required defaults
POSTGRES_HOST=db
POSTGRES_DB=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres

# Kong / API
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

# Simplified (public) deployment flags
SITE_URL=https://{{ supabase_domain }}
API_EXTERNAL_URL=https://{{ supabase_domain }}
SUPABASE_PUBLIC_URL=https://{{ supabase_domain }}

ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true
ENABLE_PHONE_SIGNUP=false
ENABLE_PHONE_AUTOCONFIRM=false

# Stub mailer (adjust if enabling email flows)
SMTP_ADMIN_EMAIL=admin@{{ primary_domain | default('example.com') }}
SMTP_HOST=localhost
SMTP_PORT=2500
SMTP_USER=fake_mail_user
SMTP_PASS=fake_mail_password
SMTP_SENDER_NAME=fake_sender

# Logging tokens (placeholder)
LOGFLARE_PUBLIC_ACCESS_TOKEN=public_token_placeholder
LOGFLARE_PRIVATE_ACCESS_TOKEN=private_token_placeholder

# Redis auth placeholder
REDIS_AUTH=LOCALONLYREDIS

# Docker socket (needed for some Supabase images referencing DOCKER_SOCKET_LOCATION)
DOCKER_SOCKET_LOCATION=/var/run/docker.sock

# Supabase required core secrets if referenced by upstream compose (placeholder fallback to existing secrets)
# If vault-specific values exist, map them similarly later.
SECRET_KEY_BASE={{ supabase_secret_key_base | default(jwt_secret, true) }}
VAULT_ENC_KEY={{ supabase_vault_enc_key | default(encryption_key, true) }}

# Pooler defaults to silence warnings (adjust sizes as needed)
POOLER_PROXY_PORT_TRANSACTION=6432
POOLER_MAX_CLIENT_CONN=100
POOLER_DB_POOL_SIZE=20
POOLER_DEFAULT_POOL_SIZE=20

# Auth / signup related placeholders
DISABLE_SIGNUP=false
MAILER_URLPATHS_INVITE=/auth/v1/verify
MAILER_URLPATHS_CONFIRMATION=/auth/v1/verify
MAILER_URLPATHS_RECOVERY=/auth/v1/verify
MAILER_URLPATHS_EMAIL_CHANGE=/auth/v1/verify
JWT_EXPIRY=3600
ENABLE_ANONYMOUS_USERS=true
ADDITIONAL_REDIRECT_URLS=
IMGPROXY_ENABLE_WEBP_DETECTION=true
STUDIO_DEFAULT_ORGANIZATION=default-org
STUDIO_DEFAULT_PROJECT=default-project
PGRST_DB_SCHEMAS=public
FUNCTIONS_VERIFY_JWT=true

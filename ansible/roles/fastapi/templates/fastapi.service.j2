[Unit]
Description={{ fastapi_app_name }} FastAPI Application
After=network.target

[Service]
Type=simple
User={{ fastapi_user }}
Group={{ fastapi_group }}
WorkingDirectory={{ fastapi_app_dir }}
Environment=PATH={{ fastapi_venv_path }}/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
{% for key, value in fastapi_env_vars.items() %}
Environment={{ key }}={{ value }}
{% endfor %}
ExecStart={{ fastapi_venv_path }}/bin/uvicorn main:app --host {{ fastapi_host }} --port {{ fastapi_port }} --workers {{ fastapi_workers }}
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
